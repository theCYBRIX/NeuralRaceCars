[gd_scene load_steps=9 format=3 uid="uid://ccrhr53h8iyim"]

[ext_resource type="Script" path="res://Scenes/game_area.gd" id="1_iaiwh"]
[ext_resource type="PackedScene" uid="uid://c33sfflw13k51" path="res://Scenes/neural_car_manager.tscn" id="1_jkvqb"]
[ext_resource type="PackedScene" uid="uid://51yasc5hk4v6" path="res://Scenes/track_2.tscn" id="2_6sj2g"]
[ext_resource type="PackedScene" uid="uid://bo3ui0wlk1dqt" path="res://components/camera_manager.tscn" id="3_elaeq"]
[ext_resource type="Script" path="res://components/neural_api_client.gd" id="3_mf48n"]
[ext_resource type="PackedScene" uid="uid://bji248xsn4q3q" path="res://Scenes/UI/graph.tscn" id="3_q1c5e"]
[ext_resource type="Script" path="res://components/network_layout_generator.gd" id="5_eies5"]
[ext_resource type="PackedScene" uid="uid://siv7ao18lchw" path="res://Scenes/testing_car.tscn" id="8_fpws0"]

[node name="GameArea" type="Node2D"]
script = ExtResource("1_iaiwh")
track_scene = ExtResource("2_6sj2g")

[node name="CameraManager" parent="." instance=ExtResource("3_elaeq")]

[node name="NeuralAPIClient" type="Node" parent="."]
script = ExtResource("3_mf48n")
host_address = "homeless.local"
host_port = 3050

[node name="NeuralCarManager" parent="NeuralAPIClient" node_paths=PackedStringArray("api_client") instance=ExtResource("1_jkvqb")]
enabled = false
api_client = NodePath("..")
num_networks = 200
parent_selection = 4

[node name="NetworkLayoutGenerator" type="Node" parent="NeuralAPIClient"]
script = ExtResource("5_eies5")
num_inputs = 15
num_outputs = 4
hidden_layer_sizes = Array[int]([28])
activation_functions = Array[int]([1, 1, 1])
input_normalizers = Array[int]([1, 0, 0])

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="CanvasLayer"]
offset_right = 98.0
offset_bottom = 45.0
text = "Generation: --"

[node name="TimerLabel" type="Label" parent="CanvasLayer"]
offset_top = 30.0
offset_right = 105.0
offset_bottom = 75.0
text = "Time remaining: --"

[node name="Graph" parent="CanvasLayer" instance=ExtResource("3_q1c5e")]
anchors_preset = -1
anchor_left = 0.715278
anchor_top = 0.0138889
anchor_right = 0.996528
anchor_bottom = 0.388889
resolution = 1000
metadata/_edit_use_anchors_ = true

[node name="SaveButton" type="Button" parent="CanvasLayer"]
anchors_preset = -1
anchor_left = 0.00607639
anchor_top = 0.944444
anchor_right = 0.0746528
anchor_bottom = 0.992284
offset_bottom = -1.0
text = "Save"
metadata/_edit_use_anchors_ = true

[node name="NetworkControlledCar" parent="." instance=ExtResource("8_fpws0")]
position = Vector2(132, 331)

[connection signal="child_entered_tree" from="NeuralAPIClient" to="NeuralAPIClient" method="_on_child_entered_tree"]
[connection signal="generation_countown_updatad" from="NeuralAPIClient/NeuralCarManager" to="." method="_on_generation_countown_updatad"]
[connection signal="reset" from="NeuralAPIClient/NeuralCarManager" to="." method="_on_neural_car_manager_reset"]
[connection signal="pressed" from="CanvasLayer/SaveButton" to="." method="_on_save_button_pressed"]
